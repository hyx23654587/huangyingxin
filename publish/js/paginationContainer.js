"use strict";$(function(){var t=$("#paginationContainer"),r=[];$.ajax({url:"/php/getGoods.php",type:"post",dataType:"json",success:function(n){n.error?console.log("请求失败"):(r=n.msg,new Pagination(t[0],n.msg,0,16).display(function(n){var t='<ul  class="uls">';return n.forEach(function(n){t+='<li class="lis">\n                            <div class="lisImg">\n                                <img src="'+n.goods_small_logo+'" alt="">\n                                <div>\n                                    <h6>\n                                        <a href="./detail.html?id='+n.goods_id+'">'+n.goods_name+"</a>\n                                    </h6>\n                                    <p>\n                                        <span>￥"+n.goods_price+'</span>\n                                        <button data-id="'+n.goods_id+'" class="btn btn-primary">加入购物车</button>\n                                    </p>\n                                </div>\n                            </div>\n                        </li>'}),t+="</ul>"}))}}),t.click(function(n){if("button"===n.target.tagName.toLowerCase()){var t=n.target.getAttribute("data-id");console.log("当前点的是按钮，商品id是"+t);var o=r.find(function(n){return n.goods_id===t}),a=localStorage.getItem("shoppingCart")||"[]",i=JSON.parse(a),s=i.find(function(n){return n.goods_id===t});s?s.count++:(o.count=1,i.push(o)),localStorage.setItem("shoppingCart",JSON.stringify(i)),location.href="./shoppingCart.html"}})});